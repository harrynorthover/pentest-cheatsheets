# cmd.exe Cheatsheet
A collection of useful commands to use when working in *cmd.exe.* 

##### File Management
**Check Permissions**
We can get permissions of a user for a file or directory of files. 

```
accesschk.exe /accepteula -quvw USERNAME FILE_OR_DIRECTORY 
```

- q - Omit banner
- u - Suppress errors
- v - Verbose output 
- w - Show only writable files.

- s - Recursive 

**icacls**

```
icacls FILE_NAME
```


##### Services
Get Service Info

```
sc qc SERVICE_NAME
```

Start/stop a service 

```
sc start SERVICE_NAME
sc stop SERVICE_NAME
```

**Show all writeable services.**

```
\accesschk.exe /accepteula -quvw user -c *
```

- c - Service Name to check. Use `*` to check al services

##### Saved Credentials
We can check if there are any saved credentials to use.

1. Check for saved credentials.

```
cmdkey /list
```

2. Use them to execute a malicious binary as a certain user.

##### Runas

```
runas /netonly /user:DOMAIN\USER "cmd-to-run.exe (could be nc.exe etc)"
```

```
runas /savecred /user:admin C:\PrivEsc\reverse.exe
```

##### User Management 

Add new user.

```
net user /add [username] [password]
```

Assign user to "administrators" group.

```
net localgroup administrators [username] /add
```

Change Password

```
net user USER NEW_PASSWORD
```
