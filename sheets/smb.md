## Server Message Block (SMB)

---

**Nmap scan for SMB versions**

- `$ nmap -p139/445 --script smb-protocols IP_ADDRESS`

**Nmap scan with default scripts**

- `$ nmap -sC -p 139,445 -sV IP_ADDRESS`

**List SMB shares using smbmap**

- `$ smbmap -H IP_ADDRESS -R (recursive)`

**List shares using smbclient**

- `$ smbclient -L IP_ADDRESS -N (no password)`

**Upload a file using SMB**

- `$ smbclient //IP_ADDRESS/share -c 'cd c:/remote/path ; put LOCAL_FILE REMOTE_FILE'`

**Check credentials using psexec.py**

- [psexec.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/psexec.py)
- `$ python psexec.py 'USER':'PASS'@IP_ADDRESS`

**Connect anonymously to SMB share**

- `$ smbclient //IPADDRESSS/SHARE -N (no password)`

**Enumerate Sambas using enum4linux**

- `$ enum4linux [OPTIONS] IP_ADDRESS`
